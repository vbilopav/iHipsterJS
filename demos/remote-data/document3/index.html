<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">


    <link rel="stylesheet" href="../../shared/css/water/dark.css">
    <link rel="stylesheet" href="../../shared/css/remote-data.css">

    <title></title>
</head>
<body>

    <script src="../../shared/loading.js"></script>

    <template id="templates">
        ${name => `
            <div class="panel-heading">
                <span>${name}</span>
            </div>
        `}
        ${(key, value) => `
            <li class="list-group-item">
                <strong>${key}: </strong>${value}
            </li>
        `}
    </template>

    <!--main script template is always in last template tag -->
    <template>
        ${
        <script>
            // constructor 
            (() => {
                const templates = this.template.import("$composite!templates")();
                this.header = templates[0];
                this.item = templates[1];
                console.log(templates);

                this.template.rendered = element => {
                    console.log("Template rendered into element:");
                    console.log(element);
                    console.log("I also have following model defined:");
                    console.log(this.template.model);
                }
            })()
        </script>
        }
        <div>
            <p>
                <h2>JavaScript application frameworks</h2>
            </p>
            ${async () => this.template.forEach(await _app.fetch("../../shared/frameworks.json"), (name, item) => 
                `<div class="panel panel-default" name="${name}">
                    ${this.header(name)}
                    <ul>
                        ${this.template.forEach(item, (key, value) => this.item(key, value))}
                    </ul>
                </div>`
            )}
        </div>
    </template>


    <!-- <script type="module" src="../../../src/ihjs/dev/ihjs.js"></script> -->
    <script type="module" src="../../../src/ihjs/build/1.0.0/ihjs.js"></script>

</body>
</html>
