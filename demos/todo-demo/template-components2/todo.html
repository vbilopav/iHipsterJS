${<script>this.template.css("/demos/shared/css/todo.css")</script>}

${
<script>
    // constructor
    (
        () => {
            // register "todo-item" tag with the application
            _app.customElements.define({
                tag: "todo-item", 
                src: "$template!demos/todo-demo/template-components2/todo-item.html",
                observedAttributes: ['id', 'data-index']
            });

            let {setCount, increase} = this.template.import("demos/todo-demo/template-components2/count");
            this.setCount = setCount;
            this.increase = increase;

            // To optimize template parsing - inform template to watch it-self for only specific custom tags:
            // this.template.watch("todo-item");
            // this.template.watch("tag-a", "tag-b");
            // etc...

            this.template.rendered = element => {
                // Only rendered components that have name or id attribute will ba available in children property
                console.log("I haz following components: ");
                console.log(element.findAll("todo-item"));
                console.log("Change some attribute value on todo-item element...");
            }
        }
    )()
</script>
}

<div class="ToDo">
    <h1 class="ToDo-Header">ihjs To Do demo</h1>
    <div class="ToDo-Container">
        <div class="ToDo-Content" id="content">
            ${<script>
                async () => this.template.forEach(await _app.fetch("/demos/shared/todo.json"), (item, index) => 
                `
                    <todo-item id="${'todo-item-' + index}" data-index="${this.setCount(index+1)}">${item}</todo-item>
                `
                )
            </script>}
        </div>
        <input type="text" id="input" />
        <div class="ToDo-Add" onclick="createNewToDoItem">+</div>
    </div>
</div>

${
<script>
    () => {
        this.template.input = "initial value";
        this.template.createNewToDoItem = () => 
            this.template.model.content.append(`<todo-item data-index="${this.increase()+1}">${this.template.model.input.value}</todo-item>`.toElements())
    }
</script>
}
